<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <section class="d-flex " id="data-tabel"
        style="padding: 20px; width: 100%; height: 100vh; background-color: rgb(224, 231, 255);">
        <div class="container h-100">
            <div class="card h-50 shadow border border-primary">
                <div class="card-header " style="height: 4rem;">
                    <div class="btn btn-success " style="border-radius: 18px;">Kembali</div>
                </div>
                <div class="card-body">

                    <h3>
                        <strong>membuat table leeds baru</strong><br>
                        CREATE TABLE leeds (
                        id_leads INT AUTO_INCREMENT PRIMARY KEY,
                        tanggal DATE NOT NULL,
                        id_seles INT,
                        id_product INT,
                        no_wa VARCHAR(15),
                        nama_lead VARCHAR(100),
                        kota VARCHAR(100),
                        id_user INT
                        );

                    </h3>
                    <p>
                        <strong>membuat isi table</strong>
                        <br>
                        INSERT INTO leeds (tanggal, id_seles, id_product, no_wa, nama_lead, kota, id_user) VALUES
                        ('2024-10-08', 1, 101, '08123456789', 'John Doe', 'Jakarta', 1),
                        ('2024-10-08', 2, 102, '08198765432', 'Jane Smith', 'Bandung', 2),
                        ('2024-10-09', 1, 103, '08234567890', 'Michael Johnson', 'Surabaya', 1),
                        ('2024-10-09', 3, 104, '08345678901', 'Emily Davis', 'Semarang', 3);

                    </p>
                    <br>

                </div>
            </div>
        </div>
    </section>
    <section class="d-flex " id="data-tabel"
        style="padding: 20px; width: 100%; height: 100vh; background-color: rgb(224, 231, 255);">
        <div class="container h-100">
            <div class="card h-50 shadow border border-primary">
                <div class="card-header " style="height: 4rem;">
                    <div class="btn btn-success " style="border-radius: 18px;">Kembali</div>
                </div>
                <div class="card-body">

                    <form id="myForm">
                        <div class="row d-flex mt-3">
                            <div class="col-4">
                                <label for="date">Tanggal</label>
                                <input type="date" id="date" name="date" class="form-control" style="width: 100%;">
                            </div>
                            <div class="col-4">
                                <label for="seles">Seles</label>
                                <select name="seles" id="seles" class="form-select" style="width: 100%;">
                                    <option value="-">-Pilih Seles-</option>
                                </select>
                            </div>
                            <div class="col-4">
                                <label for="inputText">Name Lead</label>
                                <input type="text" id="inputText" name="nameLead" class="form-control"
                                    placeholder="Input Text" style="width: 100%;">
                            </div>
                        </div>
                        <div class="row d-flex mt-3">

                            <div class="col-4">
                                <label for="product">Product</label>
                                <select name="product" id="product" class="form-select" style="width: 100%;">
                                    <option value="-">-Pilih Product-</option>
                                </select>
                            </div>

                            <div class="col-4">
                                <label for="inputText">no.Whatsapp</label>
                                <input type="text" class="form-control ms-2 mt-7" placeholder="Input 1" name="">
                            </div>

                            <div class="col-4">
                                <label for="inputText">Kota</label>
                                <input type="text" class="form-control ms-2 mt-7" placeholder="Input 2" name="input2">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 d-flex justify-content-center mt-2 gap-4">
                                <button type="submit" class="btn btn-success"
                                    style="width: 7rem; height: 3rem; border-radius: 18px; background-color: #6610f2;">
                                    Simpan</button>
                                <button type="reset" class="btn"
                                    style="width: 7rem; height: 3rem; border-radius: 18px; background-color: #dbdee1">
                                    Cancel</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <section class="d-flex " id="data-tabel"
        style="padding: 20px; width: 100%; height: 100vh; background-color: rgb(224, 231, 255);">
        <div class="container h-100">
            <div class="card h-50 shadow border border-primary">
                <div class="card-header " style="height: 4rem;">
                    <div class="btn btn-success " style="border-radius: 18px;">Kembali</div>
                </div>
                <div class="card-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">No</th>
                                <th scope="col">ID Input</th>
                                <th scope="col">seles</th>
                                <th scope="col">Produk</th>
                                <th scope="col">Nama Leads</th>
                                <th scope="col">No Wa</th>
                                <th scope="col">Kota</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th scope="row">1</th>
                                <td>1</td>
                                <td>Mark</td>
                                <td>Otto</td>
                                <td>@mdo</td>
                                <td>08389345345</td>
                                <td>bogor</td>
                            </tr>
                            <tr>
                                <th scope="row">2</th>
                                <td>2</td>
                                <td>hansen</td>
                                <td>Otto</td>
                                <td>@mdo</td>
                                <td>08389345345</td>
                                <td>bogor</td>
                            </tr>

                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </section>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        let data = []
        $(document).ready(function () {

            fetch('http://localhost:3000/', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                // body: JSON.stringify(data) 
            })
                .then(response => response.json())
                .then(result => {
                    console.log('Success:', result.payload.datas);
                    console.log('Success:', result.payload.datas);
                    // Assuming result.payload.datas is an array of products
                    const products = result.payload.datas;

                    // Find the select element
                    const $productSelect = $('#product');

                    // Clear existing options (if needed)
                    $productSelect.empty();
                    $productSelect.append('<option value="">-Pilih Product-</option>'); // Add the default option

                    // Iterate over the products and append them to the select element
                    products.forEach(product => {
                        $productSelect.append(`<option value="${product.id_produk}">${product.nama_produk}</option>`);
                    });
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Terjadi kesalahan saat menyimpan data.');
                });

            fetch('http://localhost:3000/seles', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                // body: JSON.stringify(data) 
            })
                .then(response => response.json())
                .then(result => {
                    console.log('Success:', result.payload.datas);
                    // Assuming result.payload.datas is an array of products
                    const selesData = result.payload.datas;

                    // Find the select element
                    const $selesSelected = $('#seles');

                    // Clear existing options (if needed)
                    $selesSelected.empty();
                    $selesSelected.append('<option value="">-Pilih Seles-</option>'); // Add the default option

                    // Iterate over the products and append them to the select element
                    selesData.forEach(selesLoop => {
                        $selesSelected.append(`<option value="${selesLoop.id_seles}">${selesLoop.nama_seles}</option>`);
                    });
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Terjadi kesalahan saat menyimpan data seles.');
                });

        });
        // document.getElementById('myForm').addEventListener('submit', function (event) {
        //     event.preventDefault(); // Mencegah form dari submit secara default


        //     const formData = new FormData(this);


        //     const data = {};
        //     formData.forEach((value, key) => {
        //         data[key] = value;
        //     });


        //     console.log(data);



        // });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>